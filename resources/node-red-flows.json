[{"id":"926db3bd.4273a","type":"tab","label":"Test","disabled":false,"info":""},{"id":"2297acf6.e98c64","type":"tab","label":"Diagnosing Childhood Malaria","disabled":false,"info":""},{"id":"7bf38ac1.088444","type":"careflow-config","environment":"xian","runtime_flow_path":"/Users/xian/projects/data-first-emr/workflow-poc-emr/resources/node-red-flows.json"},{"id":"2a05be70.47a522","type":"careflow-config","environment":"pda","runtime_flow_path":"/Users/xian/projects/data-first-emr/react-native/care-bricks-pda/resources/node-red-flows.json"},{"id":"75a56cc9.afbb04","type":"careflow","z":"926db3bd.4273a","careflow_runtime":"2a05be70.47a522","x":500,"y":60,"wires":[]},{"id":"15a9f8f.db7a907","type":"case-start","z":"926db3bd.4273a","name":"","includename":"","includeidentifier":"","program":"","expression":"","x":140,"y":120,"wires":[["d4963f51.1f9af"]]},{"id":"d710c7f5.b1e898","type":"register-patient","z":"2297acf6.e98c64","name":"Register Patient","x":140,"y":40,"wires":[["89f6c852.edac68"]]},{"id":"19d5e2b3.2f69cd","type":"question-select","z":"2297acf6.e98c64","name":"Duration of Illness","label":"","scope":"encounter","key":"","behavior":"single","devices":[{"sid":"Less than or equal to 2 days"},{"sid":"2-15 days"},{"sid":"16-30 days"},{"sid":"Over 30 days"},{"sid":"Unknown"}],"x":190,"y":300,"wires":[["3a1ccd69.17c732"]]},{"id":"3a1ccd69.17c732","type":"question-select","z":"2297acf6.e98c64","name":"Conscious","label":"","scope":"encounter","key":"","behavior":"single","devices":[{"sid":"Yes"},{"sid":"No"},{"sid":"Unknown"}],"x":170,"y":340,"wires":[["328c642.c0c819c"]]},{"id":"328c642.c0c819c","type":"question-select","z":"2297acf6.e98c64","name":"Anemia","label":"","scope":"encounter","key":"","behavior":"","devices":[{"sid":"Present"},{"sid":"Absent"},{"sid":"Unknown"}],"x":160,"y":380,"wires":[["aec8f74d.d475d8"]]},{"id":"d74069dd.11bc68","type":"summary","z":"2297acf6.e98c64","name":"Show calculated birthdate","x":560,"y":160,"wires":[["dd7dc492.d24e78"]],"info":"<h1>Birthdate range</h1>\n<h3>Start: <span id=\"range-start\"></span>\n<h3>End: <span id=\"range-end\"></span>\n\n<script>\n$(\"#range-start\").text(currentPatient.birthdate_start);\n$(\"#range-end\").text(currentPatient.birthdate_end);\n</script>\n"},{"id":"aec8f74d.d475d8","type":"question-select","z":"2297acf6.e98c64","name":"Convulsions","label":"","scope":"encounter","key":"","behavior":"","devices":[{"sid":"Present"},{"sid":"Absent"},{"sid":"Unknown"}],"x":310,"y":380,"wires":[["5c859dc3.f75d74"]]},{"id":"5c859dc3.f75d74","type":"question-select","z":"2297acf6.e98c64","name":"Cough or Difficulty Breathing (CDB)","label":"","scope":"encounter","key":"","behavior":"","devices":[{"sid":"Present"},{"sid":"Absent"},{"sid":"Unknown"}],"x":540,"y":380,"wires":[["6e00a139.2d646"]]},{"id":"6e00a139.2d646","type":"question-select","z":"2297acf6.e98c64","name":"Diarrhea","label":"","scope":"encounter","key":"","behavior":"","devices":[{"sid":"Present"},{"sid":"Absent"},{"sid":"Unknown"}],"x":160,"y":420,"wires":[["2e3cda3a.45c256"]]},{"id":"2e3cda3a.45c256","type":"question-select","z":"2297acf6.e98c64","name":"History of Fever","label":"","scope":"encounter","key":"","behavior":"","devices":[{"sid":"Present"},{"sid":"Absent"},{"sid":"Unknown"}],"x":320,"y":420,"wires":[["6eefc85e.3836c8"]]},{"id":"6eefc85e.3836c8","type":"question-select","z":"2297acf6.e98c64","name":"Fever (>37.5 C)","label":"","scope":"encounter","key":"","behavior":"","devices":[{"sid":"Present"},{"sid":"Absent"},{"sid":"Unknown"}],"x":500,"y":420,"wires":[["79942273.148c9c"]]},{"id":"79942273.148c9c","type":"question-select","z":"2297acf6.e98c64","name":"Lethargie","label":"","scope":"encounter","key":"","behavior":"","devices":[{"sid":"Present"},{"sid":"Absent"},{"sid":"Unknown"}],"x":160,"y":460,"wires":[["f75ec5c0.52e9c8"]]},{"id":"f75ec5c0.52e9c8","type":"question-select","z":"2297acf6.e98c64","name":"Malnutrition","label":"","scope":"encounter","key":"","behavior":"","devices":[{"sid":"Present"},{"sid":"Absent"},{"sid":"Unknown"}],"x":310,"y":460,"wires":[["fbdd36ea.334ec8"]]},{"id":"fbdd36ea.334ec8","type":"question-select","z":"2297acf6.e98c64","name":"Unable to feed","label":"","scope":"encounter","key":"","behavior":"","devices":[{"sid":"Present"},{"sid":"Absent"},{"sid":"Unknown"}],"x":480,"y":460,"wires":[["43c8349f.53bb5c"]]},{"id":"43c8349f.53bb5c","type":"question-select","z":"2297acf6.e98c64","name":"Vomiting","label":"","scope":"encounter","key":"","behavior":"","devices":[{"sid":"Present"},{"sid":"Absent"},{"sid":"Unknown"}],"x":640,"y":460,"wires":[["4f026bb8.e9fa54"]]},{"id":"8e24c976.e51638","type":"question-select","z":"2297acf6.e98c64","name":"Age","label":"","scope":"demographic","key":"","behavior":"single","devices":[{"sid":"Less than 2 months"},{"sid":"2-12 months"},{"sid":"13-24 months"},{"sid":"25-60 months"},{"sid":"Over 60 months"},{"sid":"Unknown"}],"x":150,"y":160,"wires":[["90ba20ce.f4aa7"]]},{"id":"dd7dc492.d24e78","type":"create-patient","z":"2297acf6.e98c64","name":"","x":140,"y":200,"wires":[["2e150ef5.1d0c42"]]},{"id":"4f026bb8.e9fa54","type":"create-encounter-end","z":"2297acf6.e98c64","name":"","x":170,"y":500,"wires":[]},{"id":"85e4ecd2.055be","type":"patients-queue","z":"2297acf6.e98c64","name":"Queue #1","queueName":"first","queueDateFilter":"","label":"","encounterType":"second","rowcontent":"'<option class=emr-select-option value=' + \"\" + key + '>' \n+ entry.givenname + \" - \" \n+ entry.Age_text + \" - \"\n+ entry['Health ID'] \n+ '</option>'","x":120,"y":560,"wires":[["322b709e.ee2fe"]]},{"id":"f7b8d06e.c27be","type":"patients-queue","z":"2297acf6.e98c64","name":"Queue #2","queueName":"second","queueDateFilter":"","label":"","encounterType":"third","rowcontent":"'<option class=emr-select-option value=' + \"\" + key + '>' \n+ entry.givenname + \" - \" \n+ entry.Age_text + \" - \"\n+ entry['Health ID'] \n+ '</option>'","x":120,"y":600,"wires":[["958eabf3.adbdf8"]]},{"id":"322b709e.ee2fe","type":"create-encounter-end","z":"2297acf6.e98c64","name":"","x":410,"y":560,"wires":[]},{"id":"958eabf3.adbdf8","type":"create-encounter-end","z":"2297acf6.e98c64","name":"","x":410,"y":600,"wires":[]},{"id":"cbe77f00.95673","type":"question-primitive","z":"2297acf6.e98c64","name":"Name","label":"","scope":"demographic","key":"givenname","datatype":"string","optional":"","x":150,"y":120,"wires":[["8e24c976.e51638"]]},{"id":"89f6c852.edac68","type":"question-primitive","z":"2297acf6.e98c64","name":"Health ID","label":"","scope":"demographic","key":"","datatype":"string","optional":true,"x":160,"y":80,"wires":[["cbe77f00.95673"]]},{"id":"90ba20ce.f4aa7","type":"function","z":"2297acf6.e98c64","name":"calc birthdate range","func":"var start = new Date();\nvar end = new Date();\n\nswitch (currentPatient.Age_val) {\n    case \"0\":\n        start.setMonth(start.getMonth() - 2);\n        end = '';\n        break;\n    case \"1\":\n        start.setMonth(start.getMonth() - 12);\n        end.setMonth(end.getMonth() - 2);\n        break;\n    case \"2\":\n        start.setMonth(start.getMonth() - 24);\n        end.setMonth(end.getMonth() - 13);\n        break;\n    case \"3\":\n        start.setMonth(start.getMonth() - 60);\n        end.setMonth(end.getMonth() - 25);\n        break;\n    case \"4\":\n        start = '';\n        end.setMonth(end.getMonth() - 60);\n        break;\n    case \"5\":\n        start = 'unknown';\n        end = 'unknown';\n    default:\n        start = 'error';\n        end = 'error';\n        break;\n}\n\ncurrentPatient['birthdate_start']= start;\ncurrentPatient['birthdate_end']= end;\n\nupdateCurrentPatient(currentPatient);\n","outputs":1,"noerr":0,"x":320,"y":160,"wires":[["d74069dd.11bc68"]]},{"id":"2e150ef5.1d0c42","type":"set-encountertype","z":"2297acf6.e98c64","name":"","encounterType":"first","x":150,"y":260,"wires":[["19d5e2b3.2f69cd"]]},{"id":"28d4d88.067c828","type":"find-patient","z":"2297acf6.e98c64","name":"Browse all patients","includename":"","includeidentifier":"","program":"","expression":"","rowcontent":"'<option class=emr-select-option value=' + \"\" + key + '>' \n+ entry.givenname + \" - \" \n+ entry.Age_text + \" - \"\n+ entry['Health ID'] \n+ '</option>'","x":150,"y":640,"wires":[["5a4bc667.de1008"]]},{"id":"5a4bc667.de1008","type":"end-flow","z":"2297acf6.e98c64","name":"","x":360,"y":640,"wires":[]},{"id":"75931b8b.30a314","type":"careflow","z":"2297acf6.e98c64","careflow_runtime":"7bf38ac1.088444","x":580,"y":60,"wires":[]},{"id":"d4963f51.1f9af","type":"question-select","z":"926db3bd.4273a","name":"Duration of Illness","label":"","scope":"encounter","key":"","behavior":"single","devices":[{"sid":"Less than or equal to 2 days"},{"sid":"2-15 days"},{"sid":"16-30 days"},{"sid":"Over 30 days"},{"sid":"Unknown"}],"x":170,"y":240,"wires":[["757e10e2.200ae"]]},{"id":"757e10e2.200ae","type":"question-select","z":"926db3bd.4273a","name":"Conscious","label":"","scope":"encounter","key":"","behavior":"single","devices":[{"sid":"Yes"},{"sid":"No"},{"sid":"Unknown"}],"x":150,"y":280,"wires":[["71ef77a0.9c2278"]]},{"id":"71ef77a0.9c2278","type":"question-select","z":"926db3bd.4273a","name":"Anemia","label":"","scope":"encounter","key":"","behavior":"","devices":[{"sid":"Present"},{"sid":"Absent"},{"sid":"Unknown"}],"x":140,"y":320,"wires":[["986115d6.12e5a8"]]},{"id":"1db54233.2a98fe","type":"question-select","z":"926db3bd.4273a","name":"Diarrhea","label":"","scope":"encounter","key":"","behavior":"","devices":[{"sid":"Present"},{"sid":"Absent"},{"sid":"Unknown"}],"x":140,"y":360,"wires":[["f721fe16.28959"]]},{"id":"79bb2a2c.4897f4","type":"question-select","z":"926db3bd.4273a","name":"Lethargie","label":"","scope":"encounter","key":"","behavior":"","devices":[{"sid":"Present"},{"sid":"Absent"},{"sid":"Unknown"}],"x":140,"y":400,"wires":[["859571c3.b0c21"]]},{"id":"859571c3.b0c21","type":"question-select","z":"926db3bd.4273a","name":"Malnutrition","label":"","scope":"encounter","key":"","behavior":"","devices":[{"sid":"Present"},{"sid":"Absent"},{"sid":"Unknown"}],"x":290,"y":400,"wires":[["a5d5049d.8ec8e8"]]},{"id":"f721fe16.28959","type":"question-select","z":"926db3bd.4273a","name":"History of Fever","label":"","scope":"encounter","key":"","behavior":"","devices":[{"sid":"Present"},{"sid":"Absent"},{"sid":"Unknown"}],"x":300,"y":360,"wires":[["142028e7.481327"]]},{"id":"986115d6.12e5a8","type":"question-select","z":"926db3bd.4273a","name":"Convulsions","label":"","scope":"encounter","key":"","behavior":"","devices":[{"sid":"Present"},{"sid":"Absent"},{"sid":"Unknown"}],"x":290,"y":320,"wires":[["ff6f1720.6027a8"]]},{"id":"ff6f1720.6027a8","type":"question-select","z":"926db3bd.4273a","name":"Cough or Difficulty Breathing (CDB)","label":"","scope":"encounter","key":"","behavior":"","devices":[{"sid":"Present"},{"sid":"Absent"},{"sid":"Unknown"}],"x":520,"y":320,"wires":[["1db54233.2a98fe"]]},{"id":"142028e7.481327","type":"question-select","z":"926db3bd.4273a","name":"Fever (>37.5 C)","label":"","scope":"encounter","key":"","behavior":"","devices":[{"sid":"Present"},{"sid":"Absent"},{"sid":"Unknown"}],"x":480,"y":360,"wires":[["79bb2a2c.4897f4"]]},{"id":"a5d5049d.8ec8e8","type":"question-select","z":"926db3bd.4273a","name":"Unable to feed","label":"","scope":"encounter","key":"","behavior":"","devices":[{"sid":"Present"},{"sid":"Absent"},{"sid":"Unknown"}],"x":460,"y":400,"wires":[["11fa6941.0c4167"]]},{"id":"11fa6941.0c4167","type":"question-select","z":"926db3bd.4273a","name":"Vomiting","label":"","scope":"encounter","key":"","behavior":"","devices":[{"sid":"Present"},{"sid":"Absent"},{"sid":"Unknown"}],"x":620,"y":400,"wires":[[]]}]